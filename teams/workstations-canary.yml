name: Workstations (canary)
controls:
  os_updates:
    macos:
      deadline: "2023-08-11"
      minimum_version: "13.5"
    windows:
      deadline:
      grace_period:
  os_settings:
    disk_encryption: true
    custom_settings:
    - ../lib/macos-os-updates.ddm.json
    - ../lib/macos-password.mobileconfig
    - ../lib/windows-screenlock.xml
  setup_experience:
    end_user_authentication:
    bootstrap_package:
    macos_setup_assistant:
  scripts:
  - ../lib/remove-zoom-artifacts.script.sh
  - ../lib/reset-timezone.sh
queries: 
- ../lib/collect-usb-devices.queries.yml
- ../lib/collect-failed-login-attempts.queries.yml
- name: Collect fleetd update channels 
  description: "Collects the update channels for all fleetd components: osquery, Orbit, and Fleet Desktop. To see which version number each channel is on, ask in #help-engineering."
  query: SELECT desktop_channel, orbit_channel, osqueryd_channel FROM orbit_info;
  interval: 300
  observer_can_run: true
  automations_enabled: false
policies: 
- ../lib/device-health.policies.yml
agent_options: ./lib/agent-options.yml
team_settings:
  webhook_settings:
    secrets:
      - secret: $FLEET_WORKSTATIONS_CANARY_ENROLL_SECRET